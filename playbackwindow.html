<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Playback</title>
  <link rel="stylesheet" href="style.css"> <!-- import your style -->
</head>
<body>
  <h2>Playback Window</h2>
  <canvas id="playbackCanvas" width="1000" height="1000" style="border:1px solid black"></canvas>
  <div>
    <button id="prevFrame">⏮ Prev</button>
    <button id="nextFrame">⏭ Next</button>
  </div>

  <script>
    const canvas = document.getElementById("playbackCanvas");
    const ctx = canvas.getContext("2d");

    let frames = [];
    let currentFrame = 0;

    // This will be called from the opener page
    window.loadRecording = function(recordedFrames) {
      frames = recordedFrames;
      currentFrame = 0;
      showFrame(currentFrame);
    };

    function showFrame(i) {
      console.log("Showing first frame");
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (!frames[i]) return;

      frames[i].forEach(info => {
        ctx.beginPath();
        ctx.arc(info.x, info.y, 5, 0, Math.PI * 2);
        ctx.fillStyle = info.color;
        ctx.fill();
        ctx.closePath();
      });
    }

    document.getElementById("prevFrame").onclick = () => {
      if (currentFrame > 0) {
        currentFrame--;
        showFrame(currentFrame);
      }
    };
    document.getElementById("nextFrame").onclick = () => {
      if (currentFrame < frames.length - 1) {
        currentFrame++;
        showFrame(currentFrame);
      }
    };
  </script>
</body>
</html>