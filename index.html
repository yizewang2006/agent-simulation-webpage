<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agent Simulation Project</title>
  <style>
    canvas {
      background-color: #FFFFFF; 
      display: block;
      margin: 0 auto;
      border: 2px solid black; /* black border */
    }
  </style>
</head>
<body>

<canvas id="canvasOne" width="500" height="500"></canvas>

<!-- Define the global canvas and context before loading circle.js -->
<script>
  // Global definitions that will be used by Circle
  const canvas = document.getElementById('canvasOne');
  const ctx = canvas.getContext('2d');
</script>

<!-- Load the Circle class from circle.js -->
<script src="agent.js"></script>

<!-- Main script that uses Circle -->
<script>
  // Create a testing agent
  let agentOne = new Agent(true, canvas.width / 2, canvas.height / 2, 5, 0, 0, '#F5C6B3', 100);

  // Create a list of circles.??????????????????
  const agents = [];
  
  // Create 5 circles with random positions and velocities that use the default color '#000000'
  /*
  for (let i = 0; i < 3; i++) {
    const radius = 5;
    const x = Math.random() * (canvas.width - radius * 2) + radius;
    const y = Math.random() * (canvas.height - radius * 2) + radius;
    const dxTest = (Math.random() - 0.5) * 5;
    const dyTest = (Math.random() - 0.5) * 5;
    
    // Add a FOV radius of 100 pixels and an angle of 60 degrees (PI/3)
    agents.push(new Agent(false, x, y, radius, dxTest, dyTest, "#000000", 100, 5 * Math.PI / 6));
  }
  */

  // Test the four corners.
  const radius = 5;
  const xPos = [
    canvas.width * 0.1,  // left
    canvas.width * 0.1,  // left
    canvas.width * 0.9,  // right
    canvas.width * 0.9   // right
  ];
  const yPos = [
    canvas.height * 0.9, // bottom
    canvas.height * 0.1, // top
    canvas.height * 0.9, // bottom
    canvas.height * 0.1  // top
  ];

  const dxTest = 0;
  const dyTest = 0;

  for (let j = 0; j < 4; j++) {
    const x = xPos[j];
    const y = yPos[j];
    console.log("Creating agent", j, "at x:", x, "y:", y);

    agents.push(new Agent(false, x, y, radius, dxTest, dyTest, "#000000", 100, 5 * Math.PI / 6));
  }

  // This step is testing only.
  agents.push(agentOne);

  // Set speed to 0
  agentOne.dy = -2;
  agentOne.dx = -2;

  // Animation function that updates and draws all circles.
  function animate() {
    // Clear the canvas once per frame.
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Update position and redraw each circle.
    agents.forEach(agent => agent.updatePosition(agents));

    requestAnimationFrame(animate);
  }

  // Start the animation loop.
  animate();
</script>

</body>
</html>